<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leaderboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="center-screen">
<h1>Leaderboard 🏆</h1>
<table id="leaderboardTable">
<tr><th>Rank</th><th>User</th><th>Points</th></tr>
</table>
</div>

<script>
const votes = JSON.parse(localStorage.getItem("votes") || "{}");
const result = localStorage.getItem("currentResult") || null;

let scores = {};
for(let user in votes){
    if(!scores[user]) scores[user]=0;
    if(votes[user]===result) scores[user]+=1;
}

let sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
const table = document.getElementById("leaderboardTable");
sorted.forEach(([user,points],idx)=>{
    let tr = document.createElement("tr");
    tr.innerHTML=`<td>${idx+1}</td><td>${user}</td><td>${points}</td>`;
    table.appendChild(tr);
});
</script>
</body>
</html>
