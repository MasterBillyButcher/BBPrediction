<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="center-screen">
<h1>Admin Panel ⚙️</h1>
<p id="welcome"></p>
<div id="adminActions" style="display:none;">
<h3>Select Nominated Contestants</h3>
<select id="nominations" multiple></select>
<button onclick="publishNominations()">Publish Nominations</button>

<h3>Set Prediction Result</h3>
<select id="setResult"></select>
<button onclick="setResultFunc()">Set Result</button>
</div>
</div>

<script>
// Admin Twitch usernames
let admins = ["bobmasterbillie"]; 

// All contestants
const allContestants = ["Ashnoor Kaur","Gaurav Khanna","Awez Darbar","Nagma Mirajkar","Zeishan Qadri","Baseer Ali","Abhishek Bajaj","Taniya Mittal","Farrhana Bhatt","Amaal Mallik","Kunickaa Sadanand","Natalia Janoszek","Pranit More","Neelam Giri","Nehal Chudasma","Mridul Tiwari","Shehbaz Badesha"];

// Twitch username from OAuth
const twitchUser = localStorage.getItem("twitchUser");
document.getElementById("welcome").innerText = `Welcome ${twitchUser}`;

if(admins.includes(twitchUser)){
    document.getElementById("adminActions").style.display="block";

    const sel1 = document.getElementById("nominations");
    allContestants.forEach(name=>{
        const opt = document.createElement("option");
        opt.textContent = name;
        sel1.appendChild(opt);
    });

    const sel2 = document.getElementById("setResult");
    allContestants.concat(["No Elimination","Double Elimination"]).forEach(name=>{
        const opt = document.createElement("option");
        opt.textContent = name;
        sel2.appendChild(opt);
    });
}else{
    alert("You are not an admin!");
}

function publishNominations(){
    const selected = Array.from(document.getElementById("nominations").selectedOptions).map(o=>o.value);
    localStorage.setItem("currentNominations", JSON.stringify(selected));
    alert("Nominations published: " + selected.join(", "));
}

function setResultFunc(){
    const res = document.getElementById("setResult").value;
    localStorage.setItem("currentResult", res);
    alert("Result set: "+res);
}
</script>
</body>
</html>
